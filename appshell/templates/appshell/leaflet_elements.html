{%macro element(items)%}
(function(){
{%for i in items%}
{{i}}
{%endfor%}
return e;
})
{%endmacro%}

{%macro marker(pos, opts={})%}
var e = L.marker({{pos|tojson}}, {{opts|tojson}});
{%endmacro%}

{%macro popup(popup)%}
e.bindPopup({{popup|tojson}});
{%endmacro%}

{%macro group(c, options, klass)%}
(function(){
var e = new L.{{klass}}({{options|tojson}});
{%for i in c.elements%}
e.addLayer(({{i.get_js()}}()));
{%endfor%}
return e;
})
{%endmacro%}

{%macro polyline(points, opts={}, klass='polyline')%}
var e = L.{{klass}}({{points|tojson}}, {{opts|tojson}});
{%endmacro%}

{%macro circle(pos, radius, opts={})%}
var e = L.circle({{pos|tojson}}, {{radius|tojson}}, {{opts|tojson}});
{%endmacro%}

{%macro layer_control(self)%}
(function(map){
overlays = {};
{%for i in self.overlays%}
var ie = ({{i[0].get_js()}})();
overlays[{{i[1]|tojson}}] = ie;
{%if i[2]%}
  map.addLayer(ie);
{%endif%}
{%endfor%}
var e = L.control.layers(null, overlays);
return e;
})
{%endmacro%}
